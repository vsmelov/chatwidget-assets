<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>AI Chat</title>

<style>
  .fullscreen-div {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-image: url('spinner.gif');
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
    z-index: 1000;
    overflow: hidden;
  }
</style>

<script>
function getQueryParam(param) {
  var search = window.location.search.substring(1);
  var params = new URLSearchParams(search);
  return params.get(param);
}

function insertScriptWithScopeId() {
  var scopeId = getQueryParam('scopeId');
  if(scopeId) {
    var script = document.createElement('script');
    script.src = "https://eros-ai.cloud/aixchat.js";
    script.dataset.projectId = "scope_" + scopeId;
    script.dataset.scopeId = scopeId;
    script.dataset.apiUrl = "https://eros-ai.cloud:2053";
    script.dataset.userToken = "35e26211fa1d4746bc814f9cb2a478b8";
    script.dataset.divId = "aibot";
    script.onload = function() {
      setTimeout(function() {
        console.log("integratly.ai: 100ms passed. Initializing chat launcher...");
        createHiddenChatWidget();
        createChatLauncher();
        handleLauncherClick();
      }, 100);
    };
    document.body.appendChild(script);
  } else {
    console.error("scope_id is required");
  }
}

document.addEventListener('DOMContentLoaded', insertScriptWithScopeId);
</script>
</head>
<body>
<div id="aibot" class="aibot"></div>
</body>
</html>
